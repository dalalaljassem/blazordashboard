@page "/"

<BlazePage Title="Dashboard">
    <MudGrid>
        <!-- Payment Pending -->
        <MudItem xs="12" md="6">
            <MudPaper Elevation="0" Class="flex flex-col rounded-xl p-4 bg-white ">
                <div class="flex items-center ">
                    <div class="flex flex-col">
                        <h6>Pending Payments</h6>
                    </div>
                    <div class="ml-auto text-sm font-medium" style="color: red">
                        <span class="statcard-value">KD 3,200</span>
                    </div>
                </div>
            </MudPaper>
        </MudItem>
        <MudItem xs="12" md="6">
            <MudPaper Elevation="0" Class="flex flex-col rounded-xl p-4 bg-white ">
                <div class="flex items-center ">
                    <div class="flex flex-col">
                        <h6>Collected Payments</h6>
                    </div>
                    <div class="ml-auto text-sm font-medium" style="color: green">
                        <span class="statcard-value">KD 21,450</span>
                    </div>
                </div>
            </MudPaper>
        </MudItem>

        <!-- Card 1 -->
        <MudItem xs="12" sm="6" lg="4">
            <StatCard Title="Total Properties" Value="71,897" Icon="@Icons.Material.Filled.HomeWork" Change="122"
                IsPositiveChange="true" />
        </MudItem>

        <!-- Card 2 -->
        <MudItem xs="12" sm="6" lg="4">
            <StatCard Title="Total Leases" Value="71,897" Icon="@Icons.Material.Filled.NoteAdd" Change="90"
                IsPositiveChange="false" />
        </MudItem>

        <!-- Card 3 -->
        <MudItem xs="12" sm="6" lg="4">
            <StatCard Title="Total Tenants" Value="71,897" Icon="@Icons.Material.Filled.Groups" Change="122"
                IsPositiveChange="true" />
        </MudItem>


        <!-- Second Row: Charts -->
        <MudItem xs="12" md="8">
            <MudPaper Elevation="0" Class="h-[320px] p-4 flex flex-col justify-between rounded-lg">
                <MudText Typo="Typo.h6" Class="mb-2">Monthly Revenue</MudText>
                @if (barDatasets?.Length > 0)
                {
                    <MudChart ChartType="ChartType.Bar" Labels="@barLabels" Datasets="@barDatasets" />
                }
                else
                {
                    <MudText Typo="Typo.body2" Color="Color.Secondary">Loading data...</MudText>
                }
            </MudPaper>
        </MudItem>

        <MudItem xs="12" md="4">
            <MudPaper Elevation="0" Class="h-[320px] p-4 flex flex-col justify-between rounded-lg">
                <MudText Typo="Typo.h6" Class="mb-2">Revenue by Category</MudText>
                @if (pieDatasets?.Length > 0)
                {
                    <MudChart ChartType="ChartType.Pie" Labels="@pieLabels" Datasets="@pieDatasets" />
                }
                else
                {
                    <MudText Typo="Typo.body2" Color="Color.Secondary">Loading data...</MudText>
                }
            </MudPaper>
        </MudItem>


        <MudGrid Class="mt-6">
            <MudItem xs="12">
                <MudPaper Class="p-4 rounded-lg">
                    <MudText Typo="Typo.h6" Class="mb-2">Latest Activity</MudText>
                    <MudList Dense="true">
                        <MudListItem>
                            <MudListItemIcon>
                                <MudIcon Icon="@Icons.Material.Outlined.ReceiptLong" />
                            </MudListItemIcon>
                            <MudListItemText>Payment received from Tenant #148 - KD 350</MudListItemText>
                            <MudListItemMeta>10 mins ago</MudListItemMeta>
                        </MudListItem>
                        <MudListItem>
                            <MudListItemIcon>
                                <MudIcon Icon="@Icons.Material.Outlined.AddHomeWork" />
                            </MudListItemIcon>
                            <MudListItemText>New lease signed for Unit #302</MudListItemText>
                            <MudListItemMeta>1 hour ago</MudListItemMeta>
                        </MudListItem>
                        <MudListItem>
                            <MudListItemIcon>
                                <MudIcon Icon="@Icons.Material.Outlined.PersonAdd" />
                            </MudListItemIcon>
                            <MudListItemText>New tenant registered: Sarah Y.</MudListItemText>
                            <MudListItemMeta>Yesterday</MudListItemMeta>
                        </MudListItem>
                    </MudList>
                </MudPaper>
            </MudItem>
        </MudGrid>


        <!-- Larger single card -->
        <MudItem xs="12" sm="6">
            <MudPaper Elevation="0" Class="pa-4 rounded-lg h-full">
                <!-- Insert Large Widget -->
            </MudPaper>
        </MudItem>

        <!-- Three equal cards -->
        <MudItem xs="12" sm="6" md="4">
            <MudPaper Elevation="0" Class="pa-4 rounded-lg h-[200px]"></MudPaper>
        </MudItem>
        <MudItem xs="12" sm="6" md="4">
            <MudPaper Elevation="0" Class="pa-4 rounded-lg h-[200px]"></MudPaper>
        </MudItem>
        <MudItem xs="12" sm="12" md="4">
            <MudPaper Elevation="0" Class="pa-4 rounded-lg h-[200px]"></MudPaper>
        </MudItem>
    </MudGrid>
</BlazePage>


@code {
    string[] barLabels = { "Jan", "Feb", "Mar", "Apr", "May", "Jun" };
    ChartSeries[] barDatasets = Array.Empty<ChartSeries>();
    string[] pieLabels = { "Rent", "Utilities", "Services" };
    ChartSeries[] pieDatasets = Array.Empty<ChartSeries>();

    protected override void OnInitialized()
    {
        // Simulate data being available right away
        barDatasets = new[]
        {
new ChartSeries
{
Name = "Sales",
Data = new double[] { 1000, 1800, 1200, 2500, 1900, 3000 }
}
};

        pieDatasets = new[]
        {
new ChartSeries
{
Name = "Revenue",
Data = new double[] { 4500, 1200, 800 }
}
};
    }
}